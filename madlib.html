<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">
  <title>Build Something ðŸ”¨ðŸ”©ðŸ”§</title>
  <meta name="description" content="A community of builders building... something.">
  <meta name="author" content="">
  <meta property="og:title" content="Build Something" />
  <meta property="og:url" content="http://www.buildshow.co" />
  <meta property="og:image" content="http://www.buildshow.co/img/buildSomethingTitleCard.jpg" />

  <!-- Source Sans -->
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,900' rel='stylesheet' type='text/css'>

  <link type="text/css" rel="stylesheet" href="stylesheets/screen.css"></link>
</head>
<body>

  <div class="screen">
    <div class="container mtl">
      <div class="row">
        <div class="col-sm-12">
          <img src="img/watermark.png" id="logo" style="display: none;"/>
          <canvas id="testCanvas" height="440" width="880" style="display:none;"></canvas>
          <div id="madlibForm">
            <p>In order to <input id="vision"></input>, (the vision)</p>
            <p>our product will solve <input id="audience"></input> (target audience)</p>
            <p>problem of <input id="problem"></input>, (user problem)</p>
            <p>by giving them <input id="strategy"></input>, (strategy)</p>
            <p>We will know if our product works when we see <input id="goal"></input>, (goal)</p>
            <p><a href="#" class="btn btn-default" id="build">Build</a></p>
          </div>
          <div id="madlib" style="display:none;">
            <img width="600" style="max-width: 100%;"><br>
            <a href="#" class="btn btn-default" id="rebuild">Rebuild</a>
            <a href="" type="button" class="btn btn-default" id="saveMadlib" download="madlib.png">Save</a>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- End Document
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/sheetrock.min.js"></script>
  <script src="js/holder.min.js"></script>

  <!-- Load Handlebars.js from CloudFlareâ€™s CDN. -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.1.2/handlebars.min.js"></script>

  <script>
  $(document).ready(function(){
    //convertCanvasToImage("testCanvas")
    $("#build").click(function(){
      vision = $("#vision").val();
      audience = $("#audience").val();
      problem = $("#problem").val();
      strategy = $("#strategy").val();
      goal = $("#goal").val();
      buildMadlib(vision, audience, problem, strategy, goal);
    });
    $("#rebuild").click(function(){
      $("#madlibForm").show();
      $("#madlib").hide();
    });
  });

  function wrapText(context, text, x, y, maxWidth, lineHeight) {
    var words = text.split(' ');
    var line = '';

    for(var n = 0; n < words.length; n++) {
      var testLine = line + words[n] + ' ';
      var metrics = context.measureText(testLine);
      var testWidth = metrics.width;
      if (testWidth > maxWidth && n > 0) {
        context.fillText(line, x, y);
        line = words[n] + ' ';
        y += lineHeight;
      }
      else {
        line = testLine;
      }
    }
    context.fillText(line, x, y);
  }

  function buildMadlib(vision, audience, problem, strategy, goal) {
    var can = document.getElementById('testCanvas');
    var ctx = can.getContext('2d');

    var maxWidth = 820;
    var x = (can.width - maxWidth) / 2;
    var y = 60;
    var lineHeight = 40;

    var theVision = 'In order to ' + vision + ',';
    var theAudience = 'our product will solve ' + audience;
    var theProblem = 'problem of ' + problem;
    var theStrategy = 'by giving them' + strategy + '.';
    var theGoal = 'We will know if our product works when we see ' + goal + '.';
    var logo = document.getElementById("logo");

    ctx.fillStyle = '#F9F7ED';
    ctx.fillRect(0,0,880,440);
    ctx.drawImage(logo,740,340,100,55);

    ctx.font = "normal 24px Arial";
    ctx.fillStyle = '#7A7A7A';
    /** Legacy text creation
    ctx.fillText('In order to ' + theVision + ",", 10, 30);
    ctx.fillText('our product will solve ' + theAudience, 10, 60);
    ctx.fillText('problem of ' + theProblem + ",", 10, 90);
    ctx.fillText('by giving them ' + theStrategy + ",", 10, 120);
    ctx.fillText('We will know if our product works when we see ' + theGoal + ",", 10, 150);
    **/

    wrapText(ctx, theVision, x, y, maxWidth, lineHeight);
    wrapText(ctx, theAudience, x, 110, maxWidth, lineHeight);
    wrapText(ctx, theProblem, x, 160, maxWidth, lineHeight);
    wrapText(ctx, theStrategy, x, 210, maxWidth, lineHeight);
    wrapText(ctx, theGoal, x, 260, maxWidth, lineHeight);

    var img = new Image();
    img.src = can.toDataURL();
    //document.body.appendChild(img);
    $('#madlib img').attr('src', img.src);
    $("#saveMadlib").attr('href', img.src);
    $('#madlib').show();
    $('#madlibForm').hide();
  }

  // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-69255847-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
